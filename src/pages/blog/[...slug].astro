---
import { type CollectionEntry, getCollection } from "astro:content";
import Layout from "../../layouts/Layout.astro";

export const prerender = true;

export async function getStaticPaths() {
    const posts = await getCollection("blog");
    return posts.map((post: CollectionEntry<"blog">) => ({
        params: { slug: post.slug },
        props: post,
    }));
}
type Props = CollectionEntry<"blog">;

const post = Astro.props;
const { Content } = await post.render();
---

<Layout title={post.data.title} description={post.data.description}>
    <main class="min-h-screen py-20 px-6 max-w-3xl mx-auto text-gray-300">
        <article class="prose prose-invert prose-lg max-w-none">
            <div class="mb-10 text-center">
                <h1 class="text-4xl font-bold text-white mb-4">
                    {post.data.title}
                </h1>
                <div class="text-gray-500">
                    <time datetime={post.data.pubDate.toISOString()}>
                        {
                            post.data.pubDate.toLocaleDateString("en-us", {
                                year: "numeric",
                                month: "long",
                                day: "numeric",
                            })
                        }
                    </time>
                </div>
            </div>

            <div
                class="bg-gray-800/20 p-8 rounded-2xl border border-gray-700/30"
            >
                <Content />
            </div>
        </article>

        <div class="mt-20 pt-10 border-t border-gray-800 text-center">
            <a
                href="/blog"
                class="text-blue-400 hover:text-blue-300 transition-colors"
                >‚Üê Back to Blog</a
            >
        </div>
    </main>
</Layout>

<style is:global>
    /* Custom prose overrides for better contrast */
    .prose h1,
    .prose h2,
    .prose h3,
    .prose h4 {
        color: #fff;
        font-weight: 700;
    }
    .prose a {
        color: #60a5fa;
        text-decoration: none;
    }
    .prose a:hover {
        text-decoration: underline;
    }
    .prose strong {
        color: #e2e8f0;
    }
    .prose code {
        color: #f472b6;
        background: #1e293b;
        padding: 0.2rem 0.4rem;
        border-radius: 0.25rem;
        font-weight: 500;
    }
    .prose pre {
        background: #0f172a;
        border: 1px solid #334155;
    }
    .prose blockquote {
        border-left-color: #3b82f6;
        background: rgba(59, 130, 246, 0.1);
        padding: 1rem;
        border-radius: 0.5rem;
        font-style: normal;
    }
    /* Table styles */
    .prose table {
        width: 100%;
        border-collapse: collapse;
        margin-bottom: 2rem;
    }
    .prose th {
        text-align: left;
        padding: 0.75rem;
        border-bottom: 2px solid #334155;
        color: #94a3b8;
    }
    .prose td {
        padding: 0.75rem;
        border-bottom: 1px solid #1e293b;
    }
</style>
